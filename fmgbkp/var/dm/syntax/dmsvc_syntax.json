{
	"macro": {
		"ENABLE_OPTIONS": {
			"disable": 0,
			"enable": 1 
		},
		"CONTROLLER_TYPES": {
			"wtp": 1,
			"fext": 2,
			"fsw": 4 
		},
		"CONTROLLER_UPD_OPTIONS": {
			"savedb": 1,
			"resync": 2,
			"create-task": 4,
			"need-token": 8,
			"autolink": 16
		},
		"UPDATE_HA_FLAGS": {
			"reconnect": 1,
			"del-device": 2,
			"keepfile": 4
		},
		"UPDATE_SAVE_FLAGS": {
			"no-token": 1,
			"adom-only": 2
		},
		"GET_CONF_FLAGS": {
			"data-only": 1,
			"check-error": 2
		}
	},
	"obj": {
		"get/adgrp": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": { 
					"refer": "dvmdb/device"
				},
				"host": {
					"type": "string"
				},
				"fname": {
					"type": "string"
				},
				"vdom": {
					"type": "string"
				},
				"forglobal": {
					"type": "int32"
				}
			}
		},
		"update/save": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": { 
					"refer": "dvmdb/device"
				},
				"usr": {
					"type": "string"
				},
				"fname": {
					"type": "string"
				},
				"flags": {
					"type": "int32",
					"opts": "$UPDATE_SAVE_FLAGS",
					"default": 0,
					"excluded": false
				},
				"src": {
					"type": "string"
				}
			}
		},
		"get/haconf": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": { 
					"refer": "dvmdb/device"
				},
				"host": {
					"type": "string"
				},
				"fname": {
					"type": "string"
				}
			}
		},
		"install/haconf": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": { 
					"refer": "dvmdb/device"
				},
				"adom": {
					"refer": "/dvmdb/adom"
				},
				"host": {
					"type": "string"
				},
				"usr": {
					"type": "string"
				},
				"fname": {
					"type": "string"
				}
			}
		},
		"checkin/revision": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": {
					"refer": "/dvmdb/device"
				},
				"fname": {
					"type": "string"
				},
				"usr": {
					"type": "string"
				},
				"revert": {
					"type": "int32"
				},
				"keepfile": {
					"type": "int32"
				},
				"adom": {
					"refer": "/dvmdb/adom"
				}
			}
		},
		"checkout/revision": {
			"type": "command",
			"attr": {
				"device": {
					"refer": "/dvmdb/device"
				},
				"fname": {
					"internal": 1,
					"type": "string"
				},
				"revision": {
					"type": "int32"
				}
			},
			"response": {
				"content": {
					"type": "string"
				},
				"revision": {
					"type": "int32"
				}
			}
		},

		"backup/mode": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": {
					"refer": "/dvmdb/device"
				},
				"serial": {
					"type": "string"
				},
				"backup-mode": {
					"type": "int32"
				},
				"save": {
					"type": "int32"
				}
			}
		},

		"setup/ha": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": {
					"refer": "/dvmdb/device"
				},
				"script": {
					"type": "string"
				},
				"mgmt-uuid": {
					"type": "string"
				},
				"flags": {
					"type": "int32",
					"opts": "$UPDATE_HA_FLAGS",
					"default": 0,
					"excluded": false
				}
			}
		},

		"update/ips": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": {
					"refer": "/dvmdb/device"
				},
				"ips_ver": {
					"type": "string"
				},
				"old_ips_ver": {
					"type": "string"
				}
			}
		},

		"get/config": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": {
					"refer": "/dvmdb/device"
				},
				"host": {
					"type": "string"
				},
				"fname": {
					"type": "string"
				},
				"flags": {
					"type": "int32",
					"opts": "$GET_CONF_FLAGS",
					"default": 0
				},
				"dataurl": {
					"type": "string"
				}
			}
		},

		"get/ha/nonsync/config": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": {
					"refer": "/dvmdb/device"
				},
				"member_sn": {
					"type": "string"
				},
				"fname": {
					"type": "string"
				}
			}
		},

		"probe/device": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": {
					"refer": "/dvmdb/device"
				},
				"host": {
					"type": "string"
				},
				"usr": {
					"type": "string"
				},
				"passwd": {
					"type": "string"
				},
				"get_extra": {
					"type": "int32",
					"opts": "$ENABLE_OPTIONS",
					"default": 0
				}
			}
		},

		"get/confsync": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": {
					"refer": "/dvmdb/device"
				},
				"host": {
					"type": "string"
				},
				"update": {
					"type": "int32",
					"opts": "$ENABLE_OPTIONS",
					"default": 0
				},
				"keep-sync": {
					"type": "int32",
					"opts": "$ENABLE_OPTIONS",
					"default": 0
				}
			}
		},

		"set/mgmtid": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": {
					"refer": "/dvmdb/device"
				},
				"host": {
					"type": "string"
				},
				"id": {
					"type": "string"
				},
				"fmg-ip": {
					"type": "string"
				},
				"mgmt-uuid": {
					"type": "string"
				}
			}
		},

		"change/haseq": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": {
					"refer": "/dvmdb/device"
				},
				"task": { 
					"type": "int64" 
				},
				"host": {
					"type": "string"
				},
				"start-percent": {
					"type": "int32"
				},
				"end-percent": {
					"type": "int32"
				},
				"haseq": {
					"type": "string"
				}
			}
		},

		"alter/boot": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": {
					"refer": "/dvmdb/device"
				},
				"host": {
					"type": "string"
				}
			}
		},

		"upgrade/device": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": {
					"refer": "/dvmdb/device"
				},
				"host": {
					"type": "string"
				},
				"type": {
					"type": "int32",
					"opts": {
						"image": 0,
						"avfile": 1,
						"idsfile": 2,
						"secondary-image": 3,
						"template": 4,
						"config": 5,
						"ap-image": 6,
						"fml-image": 11,
						"fext-image": 12,
						"fsw-image": 13
					},
					"default": 0
				},
				"fname": {
					"type": "string"
				},
				"vdom": {
					"type": "string"
				},
				"wtpid": {
					"type": "string"
				}
			}
		},

		"get/mgrif": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": {
					"refer": "/dvmdb/device"
				},
				"host": {
					"type": "string"
				}
			}
		},
		"get/status": { 
			"type": "command",
			"internal": 1,
			"attr": {
				"device": {
					"refer": "/dvmdb/device"
				},
				"host": {
					"type": "string"
				},
				"usr": {
					"type": "string"
				},
				"passwd": {
					"type": "string"
				},
				"proto": {
					"type": "int32",
					"opts": {
						"fgfm": 0,
						"ssh": 1,
						"telnet": 2 
					},
					"default": 0
				},
				"serialno": {
					"type": "string"
				},
				"port": {
					"type": "int16" 
				},
				"use_fgfm": {
					"type": "int16" 
				}
			}
		},
		"install/script": { 
			"type": "command",
			"internal": 1,
			"attr": {
				"adom": {
					"refer": "/dvmdb/adom"
				},
				"task": { 
					"type": "int64" 
				},
				"sid": { 
					"type": "int32" 
				},
				"scope": {
					"type": "scope object",
					"extref": [ "/dvmdb/device", "/dvmdb/group" ]
				},
				"host": {
					"type": "string"
				},
				"script": {
					"refer": "/dvmdb/script"
				},
				"type": {
					"type": "string"
				},
				"admin": {
					"type": "string"
				},
				"iftcl": { 
					"type": "int32"
				},
				"ondb": { 
					"type": "int32"
				}
			}
		},
		"run/cmd": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": {
					"refer": "dvmdb/device"
				},
				"vdom": {
					"type": "string"
				},
				"command": {
					"type": "string"
				}
			}
		},
		"acquire/dvm/token": { 
			"type": "command",
			"internal": 1,
			"attr": {
				"oid": { 
					"type": "int64" 
				},
				"pid": { 
					"type": "int32" 
				},
				"id": {
					"type": "int64"
				},
				"timeout": { 
					"type": "int32" 
				}
			}
		},
		"install/config": {
			"type": "command",
			"internal": 1,
			"attr": {
				"task": { 
					"type": "int64" 
				},
				"adom": {
					"refer": "/dvmdb/adom"
				}
			},
			"subobj": {
				"install_items": {
					"type": "table",
					"attr": {
						"package": {
							"refer": "/pkg/pkg"
						},
						"device": { 
							"refer": "dvmdb/device"
						},
						"revision": { 
							"type": "int32" 
						},
						"vdoms": { 
							"type": "string"
						},
						"usr": {
							"type": "string"
						},
						"tag": {
							"type": "string"
						},
						"desc": {
							"type": "string"
						},
						"flags": { 
							"type": "int32"
						},
						"inst_file": {
							"type": "string"
						},
						"db_file": { 
							"type": "string"
						},
						"diff_file": { 
							"type": "string"
						}
					}
				}
			}
		},
		"update/mgmtdata": {
			"type": "command",
			"internal": 1,
			"attr": {
				"device": { 
					"refer": "dvmdb/device"
				}
			}
		},

		"get/wtpstatus": {
			"internal": 1,
			"type": "command",
			"attr": {
				"device": {
					"refer": "/dvmdb/device"
				},
				"host": {
					"type": "string"
				},
				"fname": {
					"type": "string"
				},
				"serial": {
					"type": "string"
				},
				"vdom-enabled": {
					"type": "int32"
				}
			}
		},

		"get/controller/status": {
			"type": "command",
			"attr": {
				"adom": {
					"type": "datasrc",
					"extref": "/dvmdb/adom"
				},
				"device": {
					"type": "datasrc",
					"extref": "/dvmdb/device"
				},
				"fname": {
					"internal": 1,
					"type": "string"
				},
				"options": {
					"type": "int32",
					"opts": "$CONTROLLER_UPD_OPTIONS",
					"default": 0,
					"excluded": false
				},
				"ctype": {
					"type": "int32",
					"opts": "$CONTROLLER_TYPES",
					"default": 0,
					"excluded": false
				},
				"resync": {
					"type": "int32"
				}
			}
		},

		"export/config": {
			"type": "command",
			"attr": {
				"device": {
					"type": "datasrc",
					"extref": "dvmdb/device"
				}
			},
			"response": {
				"content": {
					"type": "string"
				}
			}
		},

		"get/device/revision": {
			"type": "command",
			"attr": {
				"device": {
					"type": "datasrc",
					"extref": "dvmdb/device"
				}
			},
			"response": {
				"base_ver": {
					"type": "int32"
				},
				"revinfo": {
					"type": "table",
					"attr": {
						"revision": {
							"type": "int32"
						},
						"comment": {
							"type": "string"
						},
						"error": {
							"type": "string"
						},
						"extra_info": {
							"type": "string"
						},
						"instime": {
							"type": "string"
						},
						"instusr": {
							"type": "string"
						},
						"modtime": {
							"type": "string"
						},
						"modusr": {
							"type": "string"
						},
						"status": {
							"type": "int32"
						},
						"tag": {
							"type": "string"
						}
					}
				}
			}
		},

		"revert": {
			"type": "command",
			"attr": {
				"device": {
					"type": "datasrc",
					"extref": "dvmdb/device"
				},
				"revision": {
					"type": "int32"
				}
			},
			"response": {
			}
		},

		"get/instlog": {
			"type": "command",
			"attr": {
				"device": {
					"type": "datasrc",
					"extref": "dvmdb/device"
				},
				"taskId": {
					"type": "int32"
				}
			},
			"response": {
				"log": {
					"type": "string"
				}
			}
		},

		"import/config": {
			"type":"command",
			"attr": {
				"device": {
					"type": "datasrc",
					"extref": "dvmdb/device"
				},
				"config": {
					"type": "string"
				}
			},
			"task": {
				"type": "datasrc",
				"extref": "/task/task",
				"limit": 1
			}
		},
		"export/template": {
			"type": "command",
			"attr": {
				"adom": {
					"type": "datasrc",
					"extref": "/dvmdb/adom"
				},
				"list_category" : { "type": "string" },
				"create_task": { "type": "string" }
			},
			"response": {
				"taskid": {
					"type": "int32",
					"limit": 1
				},
				"file": { "type": "string", "sz": 18 }
			}
		},
		"import/template": {
			"type": "command",
			"attr": {
				"adom": {
					"type": "datasrc",
					"extref": "/dvmdb/adom"
				},
				"file": { "type": "string", "sz": 18 },
				"create_task": { "type": "string" }
			},
			"response": {
				"taskid": {
					"type": "int32",
					"limit": 1
				}
			}
		}

	}
}
